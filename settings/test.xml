<!-- Pandora settings xml file -->

<pandora>
    <!-- GLOBAL SETTINGS -->
    <IsMonitoringEnabled>true</IsMonitoringEnabled>
    <ShouldDisplayAlgorithmInfo>true</ShouldDisplayAlgorithmInfo>

    <!-- PLUGIN SETTINGS -->
    <MuonPlugin>ParticleIdExample</MuonPlugin>
    <HadronicEnergyCorrectionPlugins>EnergyCorrectionExample</HadronicEnergyCorrectionPlugins>

    <ParticleIdExample>
        <ExampleParameter>1</ExampleParameter>
    </ParticleIdExample>

    <EnergyCorrectionExample>
        <EnergyMultiplier>1.1</EnergyMultiplier>
    </EnergyCorrectionExample>

    <!-- ALGORITHM SETTINGS -->
    <algorithm type="PrepareCaloHits">
		<EnergyThreshold> 0. </EnergyThreshold>
		<TimeThreshold> 0. </TimeThreshold>
        <SetCurrentListToInputList>true</SetCurrentListToInputList>
    </algorithm>

<comment>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentCaloHits>true</DisplayCurrentCaloHits>
		<EnergyThreshold> 0. </EnergyThreshold>
		<TimeThreshold> 100. </TimeThreshold>
    </algorithm>

    <algorithm type="DisplayListsExample">
        <DisplayCurrentCaloHits>true</DisplayCurrentCaloHits>
		<EnergyThreshold> 0.003 </EnergyThreshold>
		<TimeThreshold> 45. </TimeThreshold>
    </algorithm>

	<algorithm type="VisualMonitoring">
        <ShowCurrentConnectors>true</ShowCurrentConnectors>
        <ConnectorLevel>Clusters</ConnectorLevel>
        <ShowCurrentMCParticles>false</ShowCurrentMCParticles>
        <ShowCurrentCaloHits>true</ShowCurrentCaloHits>
        <ShowCurrentTracks>false</ShowCurrentTracks>
        <ShowCurrentClusters>false</ShowCurrentClusters>
        <ShowCurrentPfos>false</ShowCurrentPfos>
        <ShowCurrentVertices>false</ShowCurrentVertices>
        <HitColors>iterate</HitColors>
        <DisplayEvent>true</DisplayEvent>
        <ShowDetector>true</ShowDetector>
        <DetectorView>""</DetectorView>
        <ShowOnlyAvailable>true</ShowOnlyAvailable>
        <ShowAssociatedTracks>true</ShowAssociatedTracks>
    </algorithm>
</comment>
	    
	<algorithm type="CaloHitPreparation"/>

	<algorithm type="APRILClustering" description="ClusterFormation">
	    <UseAsIndependent> true </UseAsIndependent>
	    <ConnectionTools>
           <!-- connector seeding in ECAL -->
<comment>
           <tool type="ConnectorSeeding">
             <CaloHitCollection> 1 </CaloHitCollection>
             <HitSearchRange> 30. </HitSearchRange>
             <MaxPseudoLayerConnection> 2 </MaxPseudoLayerConnection>
             <MaxCollectorLength> 40. </MaxCollectorLength>
             <MaxTransverseDistanceFine> 20. </MaxTransverseDistanceFine>
             <MaxTransverseDistanceCoarse> 40. </MaxTransverseDistanceCoarse> <!-- 4 * 10 mm -->
             <MaxConnectionAngleFine> 0.8 </MaxConnectionAngleFine>
             <MaxConnectionAngleCoarse> 1.0 </MaxConnectionAngleCoarse>
             <ShouldUseIsolatedHits> true </ShouldUseIsolatedHits>
             <ShouldDiscriminateConnectedHits> false </ShouldDiscriminateConnectedHits>
             <ConnectorCreationStage> 2 </ConnectorCreationStage>
           </tool>
           <tool type="ConnectorCleaning">
             <OrderParameterAnglePower> 1 </OrderParameterAnglePower>
             <OrderParameterDistancePower> 7 </OrderParameterDistancePower>
             <BackwardConnectorWeight> 2. </BackwardConnectorWeight>
             <ForwardConnectorWeight> 1. </ForwardConnectorWeight>
             <BackwardReferenceDirectionDepth> 1 </BackwardReferenceDirectionDepth>
             <ForwardReferenceDirectionDepth> 1 </ForwardReferenceDirectionDepth>
           </tool>
</comment>
           <tool type="ConnectorSeeding">
             <CaloHitCollection> 1 </CaloHitCollection>
             <HitSearchRange> 50. </HitSearchRange>
             <MaxPseudoLayerConnection> 3 </MaxPseudoLayerConnection>
             <MaxCollectorLength> 40. </MaxCollectorLength>
             <MaxTransverseDistanceFine> 40. </MaxTransverseDistanceFine>
             <MaxTransverseDistanceCoarse> 40. </MaxTransverseDistanceCoarse> <!-- 4 * 10 mm -->
             <MaxConnectionAngleFine> 2. </MaxConnectionAngleFine>
             <MaxConnectionAngleCoarse> 2. </MaxConnectionAngleCoarse>
             <ShouldUseIsolatedHits> true </ShouldUseIsolatedHits>
             <ShouldDiscriminateConnectedHits> false </ShouldDiscriminateConnectedHits>
             <ConnectorCreationStage> 2 </ConnectorCreationStage>
           </tool>
           <tool type="ConnectorCleaning">
             <OrderParameterAnglePower> 1 </OrderParameterAnglePower>
             <OrderParameterDistancePower> 7 </OrderParameterDistancePower>
             <BackwardConnectorWeight> 2. </BackwardConnectorWeight>
             <ForwardConnectorWeight> 1. </ForwardConnectorWeight>
             <BackwardReferenceDirectionDepth> 1 </BackwardReferenceDirectionDepth>
             <ForwardReferenceDirectionDepth> 1 </ForwardReferenceDirectionDepth>
           </tool>
	    </ConnectionTools>
	</algorithm>

	<algorithm type="ClosebySeedMerging">                                                                     
	    <MergeHCalSeedClusters>false</MergeHCalSeedClusters>                                                    
	</algorithm>  

    <algorithm type="WriteTreeExample">
        <FileName>test.root</FileName>
        <TreeName>testTree</TreeName>
    </algorithm>


<comment>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentClusters>true</DisplayCurrentClusters>
    </algorithm>
</comment>









<comment>
    <algorithm type="AccessListsExample"/>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentCaloHits>true</DisplayCurrentCaloHits>
    </algorithm>

    <algorithm type="SelectHitSubsetExample">
        <HitSelectionFraction>0.9</HitSelectionFraction>
        <OutputListName>SelectedHits</OutputListName>
    </algorithm>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentCaloHits>true</DisplayCurrentCaloHits>
    </algorithm>


    <algorithm type="CreateClustersExample">
        <MaxClusterHitDistance>20.</MaxClusterHitDistance>
        <OutputListName>ExampleClusters</OutputListName>
    </algorithm>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentClusters>true</DisplayCurrentClusters>
    </algorithm>

    <algorithm type="MergeClustersExample">
        <NClusterMergesToMake>1</NClusterMergesToMake>
    </algorithm>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentClusters>true</DisplayCurrentClusters>
    </algorithm>

    <algorithm type="FragmentClustersExample">
        <NClustersToFragment>1</NClustersToFragment>
        <NFragmentsPerCluster>2</NFragmentsPerCluster>
    </algorithm>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentClusters>true</DisplayCurrentClusters>
    </algorithm>

    <algorithm type="ReconfigureClustersExample">
        <NClustersToReconfigure>1</NClustersToReconfigure>
        <ReclusteringAlgorithms>
            <algorithm type="CreateClustersDaughterExample"><NClustersToMake>3</NClustersToMake></algorithm>
            <algorithm type="CreateClustersDaughterExample"><NClustersToMake>4</NClustersToMake></algorithm>
        </ReclusteringAlgorithms>
    </algorithm>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentClusters>true</DisplayCurrentClusters>
    </algorithm>

    <algorithm type="DeleteClustersExample">
        <NClustersToDelete>1</NClustersToDelete>
    </algorithm>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentClusters>true</DisplayCurrentClusters>
    </algorithm>

    <algorithm type="CreateVerticesExample">
        <OutputListName>ExampleVertices</OutputListName>
    </algorithm>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentVertices>true</DisplayCurrentVertices>
    </algorithm>

    <algorithm type="CreatePfosExample">
        <OutputListName>ExamplePfos</OutputListName>
    </algorithm>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentPfos>true</DisplayCurrentPfos>
    </algorithm>

    <algorithm type="CreateAdditionalCaloHitsExample">
        <NCaloHitsToMake>20</NCaloHitsToMake>
        <SetCurrentListToInputList>true</SetCurrentListToInputList>
    </algorithm>
    <algorithm type="DisplayListsExample">
        <DisplayCurrentCaloHits>true</DisplayCurrentCaloHits>
    </algorithm>

    <algorithm type="UseAlgorithmToolExample">
        <ExampleTools>
            <tool type="AlgorithmToolExample"/>
        </ExampleTools>
    </algorithm>

    <algorithm type="UsePluginsExample"/>

    <algorithm type="WriteTreeExample">
        <FileName>ExampleFile.root</FileName>
        <TreeName>ExampleTree</TreeName>
    </algorithm>

    <algorithm type="DisplayListsExample">
        <DisplayCurrentCaloHits>true</DisplayCurrentCaloHits>
        <DisplayCurrentTracks>false</DisplayCurrentTracks>
        <DisplayCurrentMCParticles>false</DisplayCurrentMCParticles>
        <DisplayCurrentClusters>true</DisplayCurrentClusters>
        <DisplayCurrentVertices>true</DisplayCurrentVertices>
        <DisplayCurrentPfos>true</DisplayCurrentPfos>
    </algorithm>
</comment>
	
</pandora>
